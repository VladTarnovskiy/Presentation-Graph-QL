1. Всем привет!
Меня зовут Влад и я начинающий фронтенд разработчик.
Сегодня я раскажу о технологии graphQL: что это такое, сравним с REST API, посмотрим как это работает

2. graphQL это язык запросов для взаимодействия клиента и сервера, а также среда исполнения этих запросов

GraphQL был создан для того, чтобы преодолеть ограничения REST-архитектуры. Он подходит для приложений, в которых очень много данных и они хранятся в разных базах.

В основе подхода GraphQL лежит простая идея — вместо того, чтобы создавать конечные точки для каждого объекта, достаточно создать один «умный» эндпойнт, который будет работать со сложными запросами и возвращать клиентам кумулятивные данные в том объеме, в котором клиенты их запрашивают.

3. Данный язык программирования создали разработчики Facebook в 2012 году
GraphQL - это замена REST
GraphQL использует язык запросов
Позволяет клиенту точно указать, какие данные ему нужны
Облегчает агрегирование данных из нескольких источников
Использует систему типов для описания данных
все типы запросов в GraphQL отправляются через POST.

4. ПРЕИМУЩЕСТВА ПЕРЕД REST API
Одна ссылка для всех запросов
Один запрос ко многим сущностям
В ответе ТОЛЬКО запрошенная информация
Тело запроса определяет ответ сервера

5. GraphQL был разработан в большом старом Facebook, но даже гораздо более простые приложения могут столкнуться с ограничениями традиционных REST API. Например, представьте, что вы хотите отобразить список постов, а под каждым постом - список лайков, включая имена пользователей и аватары. На самом деле, это не сложно, вы просто измените posts API, чтобы он содержал массив likes, который будет содержать пользовательские объекты.

6. Но потом, при разработке мобильного приложения, выяснилось, что из-за загрузки дополнительных данных приложение работает медленнее. Итак, теперь вам нужны две конечные точки, одна из которых возвращает посты с лайками, а другая - без них. Давайте добавим еще один фактор: оказывается, что посты хранятся в базе данных MySQL, а лайки - в Redis! Что теперь делать?! Там, где REST API достиг своего предела, и Graphs приходит на помощь.

7. GRAPHQL API ПОСТРОЕН НА ТРЕХ ОСНОВНЫХ СТРОИТЕЛЬНЫХ БЛОКАХ
Схема
Запросы
Преобразователи

8. Схема GraphQL - это описание ваших типов данных на сервере, связей между ними и логики получения этих самых данных

У вас есть данные на сервере
Существуют методы получения этих данных (методы разрешения)
Для этих методов вы описываете типы данных входных и выходных значений (объявление типа)
Возьмите методы разрешения и описания типов, умело смешайте и получите свою схему GraphQL

9. ОПРЕДЕЛЕНИЕ СХЕМЫ
Вы описываете свои данные с помощью схемы
Строго типизированный
Типы могут быть скалярными (boolean, string, ID, Float) или объектами с полями
Схема может генерировать типы в Typescript

10. Resolvers
Resolver — функция, возвращающая данные для конкретного поля. Вернуть можно только те данные, которые определены в схеме объектом TypeDefs. Распознаватели могут быть асинхронными.
Это пример простой схемы, которая определяет, как и какие данные будет получать клиент от GraphQL-сервера.

17. Хороший способ попробовать все это на практике - использовать Graph API Explorer с GitHub. Например, давайте попробуем выполнить следующий запрос

19. Мутации:
Тип мутации добавляет данные
Это аналог POST и PUT in REST
Можно также указать возвращаемые свойства
Передавать переменные

20. Подписка:
Тип подписки позволяет вам прослушивать изменения в базе данных в режиме реального времени. Подписки используют для этого websockets.

Пример:

Этот запрос позволяет вам получать список пользователей с именами и количеством лайков каждый раз, когда меняется количество строк. Такая функциональность используется, например, в веб-интерфейсе для отображения активности пользователей или результатов голосования.

21. ВЗАИМОДЕЙСТВИЕ КЛИЕНТ-СЕРВЕР (ВКРАТЦЕ):
Клиент отправляет запрос на сервер GraphQL для чтения или изменения данных. Этот запрос делается в соответствии со схемой, утвержденной заранее.
Сервер GraphQL распознает запрос с помощью специальных функций — распознавателей — и получает данные по запрошенным полям.
Клиент получает ответ с запрошенной структурой данных, обычно в формате JSON.

22. В РЕЗУЛЬТАТЕ, КОГДА GRAPHQL МОЖЕТ БЫТЬ ПОЛЕЗЕН:
Стремление свести к минимуму количество клиентских запросов.
Отказ от денормализации данных только для оптимизации работы над пользовательским интерфейсом.
Наличие нескольких источников информации, с которыми работают несколько приложений.
конец
Спасибо вам за ваше внимание!